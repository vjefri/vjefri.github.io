# Node

Node.js is a JavaScript interpreter. Or as they say on their website, *"Node.js is a JavaScript runtime built on Chrome's V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. "* Node does not just run on the browser. Node runs on different types of hardware too. Checkout https://tessel.io/. Node is also running on your terminal if you have it installed. What I love about node is the package manager (https://www.npmjs.com/). It has everything you could possibly need when building an app. It is as simple as doing `npm install express --save` and you just need to require the package like so, `var express = require('express')` and you are ready to rock. 

It is also super easy to create modules and use them in your app. For more information read [module exports](http://www.sitepoint.com/understanding-module-exports-exports-node-js/). 

Learning node really does come down to using the docs and all the wonderful functionality. If you look at the  [documentation](https://nodejs.org/dist/latest-v5.x/docs/api/documentation.html) you can become overwhelmed. My advice, use a function, log it and see what it does. There is so much functionality that it is impossible to know it all. Search it, log it and understand enough of it. 

### Basic Server
You can use node to create your own basic server. I won't go into too much detail but it is this simple with node. 

```
// importing node module
var http = require('http');

// creating a function with two params
// the request and response
var requestListener = function (req, res) {
  // all the good Async 
  res.writeHead(200);
  res.end('Hello, World!\n');
}

var server = http.createServer(requestListener);
server.listen(8080);
```
Learn some of the basics from the creator Ryan Dahl  [here](https://www.youtube.com/watch?v=F5QO2gJomn4).

### Dreaded CORS
I got the following excellent explanation from [MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS).

---

A resource makes a cross-origin HTTP request when it requests a resource from a different domain than the one which served itself. For example, an HTML page served from `http://domain-a.com makes` an `<img>` src request for `http://domain-b.com/image.jpg`. Many pages on the web today load resources like CSS stylesheets, images and scripts from separate domains.

For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts.  For example, XMLHttpRequest follows the same-origin policy. So, a web application using XMLHttpRequest could only make HTTP requests to its own domain. To improve web applications, developers asked browser vendors to allow XMLHttpRequest to make cross-domain requests.

---
So if the urls don't match then the browsers restrict access for security reasons. Even though it was created for security reasons, there are ways around it. It just makes the life of developers difficult. You might see a scary message like 
![cross-origin](http://i.stack.imgur.com/z9kyC.png)

Don't get scared, this basically means that you have to tell the browser that it's ok. 

One way to do this is to say
```
(method === 'OPTIONS') {
    // 200 means ok and headers are what you want to allow
    response.writeHead(200, headers);
    response.end("Success");
```
More about what headers to allow [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Origin). 

Getting around cros in express is even easier, just type the following. 
```
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Access");
  next();
});
```
Play around with it and see what is necessary and what is not to make the error go away. 

Although express is an abstraction around node, it is so clean and simple that is easy to love. Just look at how easy it is to create a server. 

```
var express = require('express');
var app = express();

// creating server on port 3000, localhost
var server = app.listen(3000, '127.0.0.1', function()   {
  var host = server.address().address;
  var port = server.address().port;

  console.log('Example app listening at http://%s:%s', host, port);
});
```
There is so much you can do with node. There are so many great talks that go into some of the really neat features. I won't go into them here but I will list them at the bottom. 

* 
http://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js

* 
http://socket.io/
* Watch this to understand the event loop Async
https://www.youtube.com/watch?v=8aGhZQkoFbQ
